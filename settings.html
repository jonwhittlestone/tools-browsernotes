<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Notes Settings</title>
    <link rel="stylesheet" href="settings.css">
</head>
<body>
    <div class="settings-container">
        <h1>Browser Notes Settings</h1>
        
        <div class="settings-section">
            <h2>Editor Settings</h2>
            <div class="setting-item">
                <div class="setting-label">
                    <label for="vimMode">Enable Vim Mode</label>
                    <p class="setting-description">
                        Enables Vim-style keyboard navigation in the notes editor
                    </p>
                </div>
                <div class="setting-control">
                    <label class="toggle">
                        <input type="checkbox" id="vimMode">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="settings-section">
            <h2>Context Settings</h2>
            <div class="setting-item">
                <div class="setting-label">
                    <label for="workContext">Enable Work Context</label>
                    <p class="setting-description">
                        Show work-related metrics (Gmail inbox count and Jira progress). Disable for home use to stop polling work services.
                    </p>
                </div>
                <div class="setting-control">
                    <label class="toggle">
                        <input type="checkbox" id="workContext" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="settings-section">
            <h2>Dropbox Sync</h2>
            <div class="setting-item">
                <div class="setting-label">
                    <label>Dropbox Integration</label>
                    <p class="setting-description">
                        Sync your notes to a Dropbox file for backup and cross-device access
                    </p>
                </div>
                <div class="setting-control">
                    <div id="dropboxAuth" class="dropbox-auth">
                        <button id="connectDropbox" class="btn btn-primary">Connect to Dropbox</button>
                        <div id="dropboxStatus" class="status-message"></div>
                    </div>
                    <div id="dropboxConnected" class="dropbox-connected" style="display: none;">
                        <div class="connected-status">
                            <span class="status-icon">‚úì</span>
                            <span>Connected to Dropbox</span>
                        </div>
                        <button id="disconnectDropbox" class="btn btn-secondary">Disconnect</button>
                    </div>
                </div>
            </div>
            
            <div id="dropboxFileSection" class="setting-item" style="display: none;">
                <div class="setting-label">
                    <label>Sync File</label>
                    <p class="setting-description">
                        Choose or create a markdown file in your Dropbox to sync notes
                    </p>
                </div>
                <div class="setting-control">
                    <div class="path-navigator">
                        <div class="breadcrumb">
                            <span class="breadcrumb-item clickable" data-path="">üìÅ Dropbox</span>
                            <span id="breadcrumbPath"></span>
                        </div>
                        <button id="refreshFiles" class="btn btn-icon" title="Refresh files">‚Üª</button>
                    </div>
                    
                    <div class="folder-browser">
                        <div id="folderList" class="folder-list"></div>
                    </div>
                    
                    <div class="file-selector">
                        <label for="dropboxFiles">Markdown files in current folder:</label>
                        <select id="dropboxFiles" class="file-select">
                            <option value="">Select a file...</option>
                        </select>
                    </div>
                    
                    <div class="file-actions">
                        <div class="path-input-group">
                            <label for="newFilePath">Path for new file:</label>
                            <input type="text" id="newFilePath" readonly class="path-display">
                        </div>
                        <div class="filename-input-group">
                            <input type="text" id="newFileName" placeholder="New file name (e.g., notes.md)" class="file-input">
                            <button id="createFile" class="btn btn-secondary">Create New Markdown File</button>
                        </div>
                    </div>
                    
                    <div id="currentFile" class="current-file" style="display: none;">
                        <strong>Current file:</strong> <span id="currentFilePath"></span>
                    </div>
                </div>
            </div>
            
            <div id="syncSettings" class="setting-item" style="display: none;">
                <div class="setting-label">
                    <label for="autoSync">Auto-sync</label>
                    <p class="setting-description">
                        Automatically sync changes to Dropbox
                    </p>
                </div>
                <div class="setting-control">
                    <label class="toggle">
                        <input type="checkbox" id="autoSync" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <div id="syncFrequencySettings" class="setting-item" style="display: none;">
                <div class="setting-label">
                    <label for="syncFrequency">Sync Frequency</label>
                    <p class="setting-description">
                        How often to check for changes from external editors like Obsidian
                    </p>
                </div>
                <div class="setting-control">
                    <select id="syncFrequency" class="sync-frequency-select">
                        <option value="5">Every 5 seconds (Fast)</option>
                        <option value="10">Every 10 seconds</option>
                        <option value="15">Every 15 seconds</option>
                        <option value="30" selected>Every 30 seconds</option>
                        <option value="60">Every minute</option>
                        <option value="120">Every 2 minutes</option>
                    </select>
                </div>
            </div>
            
            <div id="syncStatus" class="sync-status" style="display: none;">
                <div class="sync-info">
                    <span>Last synced: <span id="lastSyncTime">Never</span></span>
                    <button id="syncNow" class="btn btn-small">Sync Now</button>
                </div>
            </div>
        </div>
        
        <div class="vim-help" id="vimHelp" style="display: none;">
            <h2>Vim Mode Commands</h2>
            <div class="commands-grid">
                <div class="command-section">
                    <h3>Normal Mode</h3>
                    <ul>
                        <li><kbd>i</kbd> - Enter insert mode</li>
                        <li><kbd>a</kbd> - Append after cursor</li>
                        <li><kbd>o</kbd> - Open new line below</li>
                        <li><kbd>O</kbd> - Open new line above</li>
                        <li><kbd>v</kbd> - Visual mode</li>
                        <li><kbd>V</kbd> - Visual line mode</li>
                    </ul>
                </div>
                <div class="command-section">
                    <h3>Navigation</h3>
                    <ul>
                        <li><kbd>h</kbd> - Move left</li>
                        <li><kbd>j</kbd> - Move down</li>
                        <li><kbd>k</kbd> - Move up</li>
                        <li><kbd>l</kbd> - Move right</li>
                        <li><kbd>w</kbd> - Next word</li>
                        <li><kbd>b</kbd> - Previous word</li>
                        <li><kbd>0</kbd> - Start of line</li>
                        <li><kbd>$</kbd> - End of line</li>
                        <li><kbd>gg</kbd> - Go to top</li>
                        <li><kbd>G</kbd> - Go to bottom</li>
                    </ul>
                </div>
                <div class="command-section">
                    <h3>Editing</h3>
                    <ul>
                        <li><kbd>x</kbd> - Delete character</li>
                        <li><kbd>dd</kbd> - Delete line</li>
                        <li><kbd>yy</kbd> - Yank (copy) line</li>
                        <li><kbd>p</kbd> - Paste after</li>
                        <li><kbd>P</kbd> - Paste before</li>
                        <li><kbd>u</kbd> - Undo</li>
                        <li><kbd>Ctrl+r</kbd> - Redo</li>
                    </ul>
                </div>
                <div class="command-section">
                    <h3>Insert Mode</h3>
                    <ul>
                        <li><kbd>Esc</kbd> - Return to normal mode</li>
                        <li><kbd>Ctrl+[</kbd> - Return to normal mode</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p class="version">Version 1.0.0</p>
        </div>
    </div>
    
    <script src="config.js"></script>
    <script src="dist/settings.bundle.js"></script>
</body>
</html>